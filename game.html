<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryPath</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <!-- Theme Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,700;1,400&family=Fredoka:wght@400;700&family=Handlee&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css?v=1763464099">
    <link rel="stylesheet" href="css/game.css?v=1763464099">
    <!-- Splitting.js for character animations -->
    <link rel="stylesheet" href="https://unpkg.com/splitting/dist/splitting.css">
    <!-- Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.0.0/tsparticles.bundle.min.js"></script>
    <script src="https://unpkg.com/typeit@8.8.7/dist/index.umd.js"></script>
    <script src="https://unpkg.com/splitting/dist/splitting.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/granim@2.0.0/dist/granim.min.js"></script>
    <script src="js/i18n.js?v=1763464099"></script>
</head>
<body>
    <!-- Black screen overlay for theatrical entrance -->
    <div id="theatricalBlack" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10001;"></div>

    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <div class="story-title">
                <span class="title-deco">üìñ</span>
                <span id="storyTitleText">Loading...</span>
            </div>
            <div class="header-actions">
                <button class="icon-btn" id="audioToggle" title="Toggle Audio" onclick="toggleAudio()">üîá</button>
                <button class="icon-btn" data-i18n-title="game.menuBtn" title="Menu" onclick="showMenu()">‚öôÔ∏è</button>
                <button class="icon-btn" data-i18n-title="game.historyBtn" title="Story So Far" onclick="showHistory()">üìú</button>
                <button class="icon-btn" data-i18n-title="game.homeBtn" title="Home" onclick="goHome()">üè†</button>
            </div>
        </header>

        <!-- Main Story View -->
        <main class="story-view" id="storyView">
            <!-- Loading indicator (shown initially) -->
            <div class="loading-indicator" id="initialLoading">
                <div class="spinner">‚ú®</div>
                <div data-i18n="game.loading">Loading your story...</div>
            </div>

            <!-- Scene content (hidden initially) -->
            <div class="hidden" id="sceneContent">
                <!-- Scene illustration -->
                <div class="scene-frame">
                    <div class="image-loading-overlay" id="imageLoadingOverlay">
                        <div class="spinner">‚ú®</div>
                        <div class="text">Conjuring scene...</div>
                    </div>
                    <img src="" alt="Scene" class="scene-image" id="sceneImage" onload="imageLoaded()">
                </div>

                <!-- Story text -->
                <div class="narrative-panel">
                    <div class="narrative-text" id="narrativeText">
                        <!-- Story text will be inserted here -->
                    </div>
                </div>

                <!-- Choices -->
                <div class="choices-panel" id="choicesPanel">
                    <!-- Choice buttons will be inserted here -->
                </div>

                <!-- Skeleton loading (replaces thinking overlay) -->
                <div class="skeleton-loading" id="skeletonLoading" style="display: none;">
                    <div class="skeleton-paragraph"></div>
                    <div class="skeleton-paragraph"></div>
                    <div class="skeleton-paragraph short"></div>
                </div>
            </div>
        </main>

        <!-- Stats footer -->
        <footer class="stats-bar" id="statsBar" style="display: none;">
            <div class="stat-item">
                <span class="stat-icon">‚ù§Ô∏è</span>
                <span class="stat-value" id="statHP">100/100</span>
            </div>
            <div class="stat-item">
                <span class="stat-icon">üéí</span>
                <span class="stat-value" id="statItems">0 items</span>
            </div>
            <div class="stat-item">
                <span class="stat-icon">‚≠ê</span>
                <span class="stat-value" id="statKarma">Neutral</span>
            </div>
            <div class="stat-item">
                <span class="stat-icon">üìñ</span>
                <span class="stat-value">
                    <span data-i18n="game.scene">Scene</span> <span id="statScene">1</span>
                </span>
            </div>
        </footer>
    </div>

    <script src="js/audio.js?v=1763464099"></script>
    <script src="js/game.js?v=1763464099" defer></script>
</body>
</html>
